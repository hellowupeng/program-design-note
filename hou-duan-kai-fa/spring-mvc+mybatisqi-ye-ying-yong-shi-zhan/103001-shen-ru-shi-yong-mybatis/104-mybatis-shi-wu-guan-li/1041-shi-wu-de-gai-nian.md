# 10.4.1 事务的概念

事务 是 一步 或 几步 操作 组成 的 逻辑 执行 单元， 这些 基本 操作 作为 一个 整体 执行 单元， 它们 要么 全部 执行， 要么 全部 取消 执行， 绝不 能 仅仅 执行 一部分。

一个 用户 请求 对应 一个 业务 逻辑 方法， 一个 业务 逻辑 方法 往往 具有 逻辑上 的 原子 性， 此时 应该 使用 事务。

例如 一个 转 账 操作， 对应 修改 两个 账户 的 余额， 这 两个 账户 的 修改 要么 同时 生效， 要么 同时 取消， 同时 生效 是 转 账 成功， 同时 取消 是 转 账 失败； 但 不可 只 修改 其中 一个 账户， 那将 破坏 数据库 的 完整性。

事务 具备 4 个 特性： 原子 性（ Atomicity）、 一致性（ Consistency）、 隔离 性（ Isolation） 和 持续性（ Durability）。 这 4 个 特性 也 简称 为 ACID 特性：

* 原子 性（ Atomicity）。 事务 是 应用 中最 小的 执行 单位， 就 如 原子 是 自然界 最小 颗粒， 具有 不可 再分 的 特征 一样。 事务 是 应用 中 不可 再分 的 最小 逻辑 执行 体。
* 一致性（ Consistency）。 事务 执行 的 结果， 必须 使 数据库 从 一种 一致性 状态， 变 到 另一种 一致性 状态。 当 数据库 只 包含 事务 成功 提交 的 结果 时， 数据库 处于 一致性 状态。 如果 系统 运行 发生 中断， 某个 事务 尚未 完成 而被 迫 中断， 而 该 未完成 的 事务 对 数据库 所做 的 修改 已被 写入 数据库， 此时， 数据库 就 处于 一种 不正确 的 状态。一致性 是 通过 原子 性 来 保证 的。
* 隔离 性（ Isolation）。 各个 事务 的 执行 互不 干扰， 任意 一个 事务 的 内部 操作 对其 他 并发 的 事务， 都是 隔离 的， 即 并发 执行 的 事务 之间 不能 互相 影响。
* 持续性（ Durability）。 持续性 也 被称为 持久性（ Persistence）， 指事 务 一旦 提交， 对数 据 所做 的 任何 改变 都要 记录 到 永久 存储器 中， 通常 就是 保存 到 物理 数据库。



