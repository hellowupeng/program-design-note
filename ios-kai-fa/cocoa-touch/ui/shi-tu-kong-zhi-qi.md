# 视图控制器

### 概览

##### 视图控制器的作用

视图控制器是应用内部结构的基础。

UIViewController类定义了用于管理视图，处理事件，从一个视图控制器转换到另一个视图控制器以及与应用程序的其他部分协调的方法和属性。你可以继承UIViewController（或其某个子类）并添加实现应用程序行为所需的自定义代码。

两种类型的视图控制器：

* 内容视图控制器：管理应用内容的一个独立部分，是你创建的视图控制器的主要类型。
* 容器视图控制器：从子视图控制器收集信息，以便于导航的方式呈现它或以不同方式呈现这些视图控制器的内容。

大多数应用程序是两种视图控制器的混合体。

###### 视图管理

视图控制器最重要的作用是管理视图层次结构。每个视图控制器都有一个包含所有视图控制器内容的根视图。视图控制器始终具有对其根视图的引用，并且每个视图都具有对其子视图的强引用。

视图控制器和它的视图之间的关系：![](/assets/Relationship between a view controller and its views.png)

> 注意：通常的做法是使用 outlets 访问视图控制器视图层次结构中的其他视图。因为视图控制器管理其所有视图的内容，outlets 让你存储需要视图的引用。当视图从 storyboard 加载时，outlets 会自动连接到实际的视图对象。

内容视图控制器自己管理其所有视图。容器视图控制器管理自己的视图以及其子视图控制器的根视图。容器视图控制器不管理子视图控制器的内容。它只管理根视图，根据容器设计调整并放置它。

分割视图控制器管理其子视图的整体大小和位置，但子视图控制器管理这些视图的实际内容。![](/assets/View controllers can manage content from other view controllers.png)

###### 数据封装

视图控制器充当其管理的视图和应用程序数据之间的中介。当您继承UIViewController时，您可以添加任何需要在您的子类中管理数据的变量。视图控制器引用了您的数据和用于呈现该数据的视图。在两者之间来回移动数据是您的责任。![](/assets/A view controller mediates between data objects and views.png)你应始终在视图控制器和数据对象内保持清晰的职责分离。

###### 用户交互

视图控制器是响应者对象，能够处理响应者链中发生的事件。虽然他们能够这样做，但视图控制器很少直接处理触摸事件。相反，视图通常会处理自己的触摸事件，并将结果报告给关联的委托或目标对象的方法，该对象通常是视图控制器。因此，视图控制器中的大多数事件都是使用委托方法或操作方法处理的。

###### 资源管理

视图控制器承担其视图及其创建的任何对象的所有责任。UIViewController类自动处理视图管理的大多数方面。例如，UIKit会自动释放不再需要的任何视图相关资源。在你的UIViewController子类中，你负责管理你明确创建的任何对象。

当可用空闲内存不足时，UIKit会要求应用程序释放不再需要的资源。其中一种方法是调用视图控制器的 didReceiveMemoryWarning 方法。

###### 适应性

##### 视图控制器层次结构

##### 设计技巧

### 视图控制器定义

##### 定义子类

##### 实现容器视图控制器

##### 支持辅助功能

##### 保存和恢复状态

### 呈现（Presentation）和过渡（Transition）

##### 呈现视图控制器

##### 使用 Segues

##### 自定义过渡（Transition）动画

##### 创建自定义呈现（Presentation）

### Adaptivity 和 Size 变化

##### 自适应模型

##### 构建自适应界面

###### 参考资料

1. [View Controller Programming Guide for iOS](https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/index.html#//apple_ref/doc/uid/TP40007457-CH2-SW1)



