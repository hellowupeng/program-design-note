# 实现容器视图控制器

容器视图控制器是一种将来自多个视图控制器的内容组合到一个用户界面中的方法。容器视图控制器通常用于促进导航并基于现有内容创建新的用户界面类型。UIKit中容器视图控制器的示例包括UINavigationController，UITabBarController和UISplitViewController，所有这些都有助于在用户界面的不同部分之间进行导航。

### 设计自定义容器视图控制器

容器视图控制器始终像其他任何内容视图控制器一样管理根视图和一些内容。区别在于容器视图控制器从其他视图控制器获取部分内容。它获得的内容仅限于其他视图控制器的视图，嵌入在其自己的视图层次结构中。容器视图控制器设置任何嵌入视图的大小和位置，但原始视图控制器仍然管理这些视图内的内容。

在设计自己的容器视图控制器时，始终要理解容器和包含的视图控制器之间的关系。视图控制器的关系可以帮助告知他们的内容应该如何显示在屏幕上以及您的容器如何在内部管理它们。在设计过程中，问问自己以下问题：

* 容器的作用是什么？它的子视图控制器扮演什么角色？

* 同时显示多少个子视图控制器？

* 同级视图控制器之间的关系（如果有的话）是什么？

* 子视图控制器如何添加到容器或从容器中移除？

* 子视图控制器的大小或位置可以改变吗？这些变化发生在什么条件下？

* 容器是否提供任何装饰或导航相关的视图？

* 容器和子视图控制器之间需要什么样的通信？容器是否需要向UIViewController类定义的标准事件以外的其他子视图控制器报告特定的事件？

* 容器的外观是否可以用不同的方式配置？如果是这样，怎么样做？

在定义了各种对象的角色后，容器视图控制器的实现相对比较简单。UIKit的唯一要求是您在容器视图控制器和任何子视图控制器之间建立正式的父子关系。父子关系确保子视图控制器们收到任何相关的系统消息。除此之外，大多数真正的工作都发生在包含视图的布局和管理过程中，对于每个容器来说都是不同的。您可以将视图放置在容器的内容区域的任何位置，然后根据需要调整这些视图的大小。您还可以将自定义视图添加到视图层次结构中，以提供修饰或辅助导航。

##### 示例：导航控制器

`UINavigationController`对象支持通过分层数据集进行导航。导航界面一次显示一个子视图控制器。界面顶部的导航栏显示数据层次结构中的当前位置，并显示后退按钮以向后移动一个级别。向下导航到数据层次结构留给子视图控制器，并可能涉及使用表视图或按钮。

视图控制器之间的导航由导航控制器及其子视图控制器共同管理。当用户与子视图控制器的按钮或表格行进行交互时，孩子会要求导航控制器将新的视图控制器推入视图。子视图控制器处理新视图控制器内容的配置，但导航控制器管理过渡动画。导航控制器还管理导航栏，该导航栏显示用于解除最顶层视图控制器的后退按钮。

图5-1显示了导航控制器及其视图的结构。大多数内容区域由最顶层的子视图控制器填充，导航栏只占用一小部分内容区域。

图5-1 导航界面的结构![](/assets/Structure of a navigation interface.png)

在紧凑和常规环境中，导航控制器一次只显示一个子视图控制器。导航控制器调整其子视图控制器以适应可用空间。

##### 示例：分割视图控制器

`UISplitViewController`对象以主 - 细节（master-detail）布置显示两个视图控制器的内容。在这种安排中，一个视图控制器（主视图控制器）的内容决定了其他视图控制器显示的细节。两个视图控制器的可见性是可配置的，但也受当前环境的支配。在规则的水平环境中，分割视图控制器可以同时显示两个子视图控制器，也可以隐藏主视图控制器并根据需要显示。在紧凑的环境中，分割视图控制器一次只显示一个视图控制器。

分割视图控制器本身默认只有其容器视图。在示例中，两个子视图并排显示。

图5-2分割视图界面![](/assets/A split view interface.png)

### 在界面构建器中配置容器

### 实现自定义容器视图控制器

### 建立一个容器视图控制器的建议

### 将控制委派给子视图控制器



